---
// コンポーネント
import MenuSection from './MenuSection.astro';

// 画像
import { getImage } from 'astro:assets';
import bbqImage01 from '../../../assets/images/food/bbq/img-01.png';
import bbqImage02 from '../../../assets/images/food/bbq/img-02.png';
import bbqImage03 from '../../../assets/images/food/bbq/img-03.png';
import bbqImage04 from '../../../assets/images/food/bbq/img-04.png';

// BBQセクションのプロパティ
const bbqProps = {
  sectionName: 'bbq',
  title: ['湖畔の風を感じながら', '楽しむアウトドアBBQ'],
  labelText: 'BBQ（夕食・昼食）',
  subtitle: 'BARBECUE',
  description:
    '湖畔の美しい景色を背景に、新鮮な空気と共にアウトドアBBQをお楽しみください。竈門、ピザ窯、大型ファイヤーピットを完備した「KOKKO」施設では、手作りのピザや地元の食材を使用したグリル料理が楽しめます。火を囲みながら、仲間や家族と共に食事をする時間は、忘れがたい思い出となるでしょう。自然の恩恵を全身で感じるこの体験は、心も体もリフレッシュさせてくれます。',
  images: [
    { src: bbqImage01, alt: 'bbqの料理', widths: [330, 518] },
    { src: bbqImage02, alt: 'bbqの料理', widths: [312, 465] },
    { src: bbqImage03, alt: 'bbqの料理', widths: [373, 549] },
    { src: bbqImage04, alt: 'bbqの料理', widths: [311, 465] },
  ],
};
---

<MenuSection {...bbqProps}>
  <!-- 固有の要素 -->
  <article class="bbq-menu">
    <header class="bbq-menu__header">
      <div class="bbq-menu__title-wrapper">
        <h3 class="bbq-menu__title">Special Menu</h3>
        <span class="bbq-menu__price">5500円（税込）/人</span>
      </div>
      <button
        class="bbq-menu__toggle"
        type="button"
        aria-label="メニューを開閉"
      >
        <svg
          class="bbq-menu__toggle-icon bbq-menu__toggle-icon--open"
          xmlns="http://www.w3.org/2000/svg"
          width="34"
          height="34"
          viewBox="0 0 34 34"
          fill="none"
        >
          <path
            d="M2 17H32"
            stroke="white"
            stroke-width="2.66667"
            stroke-linecap="round"></path>
          <path
            d="M17 32L17 2"
            stroke="white"
            stroke-width="2.66667"
            stroke-linecap="round"></path>
        </svg>
        <svg
          class="bbq-menu__toggle-icon bbq-menu__toggle-icon--close"
          xmlns="http://www.w3.org/2000/svg"
          width="34"
          height="4"
          viewBox="0 0 34 4"
          fill="none"
        >
          <path
            d="M2 2H32"
            stroke="white"
            stroke-width="2.66667"
            stroke-linecap="round"></path>
        </svg>
      </button>
    </header>
    <div class="bbq-menu__body">
      <dl class="bbq-menu__content">
        <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">お肉</h4>
          <p class="bbq-menu__item-description">
            甲州信玄どりもも肉
            ハーブレモン・山梨県産鹿のフランクソーセージ・ベーコン・スパイシー豚ロース
          </p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">海の恵み</h4>
          <p class="bbq-menu__item-description">
            レモンペッパーシュリンプ・香味焼きイカ
          </p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">土の恵み</h4>
          <p class="bbq-menu__item-description">
            旬の野菜5～8種（朝露キャベツ・完熟フルーツトマトなど）
          </p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">パン</h4>
          <p class="bbq-menu__item-description">ホットドッグ用パン・バケット</p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">ハーブBOX</h4>
          <p class="bbq-menu__item-description">
            ローズマリー・タイム・バジルなど
          </p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">オリジナルソース</h4>
          <p class="bbq-menu__item-description">
            レモン＆オニオンソース・トマトソース
          </p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">富士五湖ポトフ</h4>
          <p class="bbq-menu__item-description"></p>
        </dd>
      </div>
      <div class="bbq-menu__item">
        <dt class="bbq-menu__item-label"></dt>
        <dd class="bbq-menu__item-detail">
          <h4 class="bbq-menu__item-title">デザート</h4>
          <p class="bbq-menu__item-description">皮ごとバナナ</p>
        </dd>
        </div>
      </dl>
      <div class="bbq-menu__footer">
        <div class="bbq-menu__note">
          季節や仕入状況などによりメニューが変わります。<br />
          旬の食材をお楽しみください。
        </div>
        <!-- <div class="bbq-menu__note">は複数設置可能 -->
      </div>
    </div>
  </article>
</MenuSection>

<script>
  // BBQメニューのトグル機能
  const bbqMenu = document.querySelector('.bbq-menu');
  const bbqMenuHeader = document.querySelector('.bbq-menu__header');
  const bbqMenuToggle = document.querySelector('.bbq-menu__toggle');

  // トグル機能
  function toggleBbqMenu() {
    if (bbqMenu) {
      bbqMenu.classList.toggle('is-open');
    }
  }

  // イベントリスナーの設定
  // ヘッダー全体をクリッカブルに
  if (bbqMenuHeader) {
    bbqMenuHeader.addEventListener('click', toggleBbqMenu);
  }

  // トグルボタン自体もクリック可能に（ヘッダーのイベントとは別に動作）
  if (bbqMenuToggle) {
    bbqMenuToggle.addEventListener('click', (e) => {
      e.stopPropagation(); // ヘッダーのイベントと重複しないように
      toggleBbqMenu(); // トグル機能を実行
    });
  }
</script>

<style lang="scss">
  @import '../../../styles/variables';
  @import '../../../styles/functions';
  @import '../../../styles/mixins';

  :global(.bbq) {
    padding-top: spx(100);
    @include tablet-up {
      padding-top: ppx(250 * 1.2);
    }
    @include desktop-up {
      padding-top: ppx(250);
    }
  }

  // BBQメニューコンポーネント
  .bbq-menu {
    width: spx(640);
    padding: spx(40) spx(30);
    border-radius: spx(20);
    background: var(--blue_4, #59a1c0);
    margin-inline: auto;
    @include tablet-up {
      width: ppx(1529 * 1.2);
      border-radius: ppx(30 * 1.2);
      padding: ppx(37 * 1.2) ppx(52 * 1.2) ppx(50 * 1.2) ppx(104 * 1.2);
    }
    @include desktop-up {
      width: ppx(1529);
      border-radius: ppx(30);
      padding: ppx(37) ppx(52) ppx(50) ppx(104);
    }

    // 開いた状態のスタイル
    &.is-open {
      .bbq-menu__body {
        max-height: 3000px; // 十分な高さを設定
        opacity: 1;
        visibility: visible;
      }

      .bbq-menu__toggle-icon--open {
        opacity: 0;
        visibility: hidden;
      }

      .bbq-menu__toggle-icon--close {
        opacity: 1;
        visibility: visible;
      }
    }

    &__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;

      @include tablet-up {
      }
      @include desktop-up {
      }
    }

    &__body {
      max-height: 0;
      opacity: 0;
      visibility: hidden;
      overflow: hidden;
      transition:
        max-height 0.4s ease-in-out,
        opacity 0.3s ease-in-out,
        visibility 0.3s ease-in-out;
      @include tablet-up {
      }
      @include desktop-up {
      }
    }

    &__title-wrapper {
      display: flex;
      align-items: baseline;
      gap: spx(20);
      @include tablet-up {
        gap: 1em;
      }
      @include desktop-up {
      }
    }

    &__title {
      color: var(--white, #fff);
      font-family: 'Zen Kaku Gothic New';
      font-size: spx(36);
      font-style: normal;
      font-weight: 700;
      line-height: 100%;
      @include tablet-up {
        font-size: ppx(50 * 1.2);
        line-height: 150%;
        letter-spacing: ppx(5 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(50);
        letter-spacing: ppx(5);
      }
    }

    &__price {
      color: var(--white, #fff);
      font-family: 'Zen Kaku Gothic New';
      font-size: spx(27);
      font-style: normal;
      font-weight: 400;
      line-height: 100%;
      @include tablet-up {
        font-size: ppx(35 * 1.2);
        font-weight: 500;
        line-height: 150%;
        letter-spacing: ppx(3.5 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(35);
        letter-spacing: ppx(3.5);
      }
    }

    &__toggle {
      width: spx(30);
      height: spx(30);
      position: relative;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;

      @include tablet-up {
        width: ppx(45 * 1.2);
        height: ppx(45 * 1.2);
      }
      @include desktop-up {
        width: ppx(45);
        height: ppx(45);
      }
    }

    &__toggle-icon {
      display: block;
      width: 100%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition:
        opacity 0.3s ease-in-out,
        visibility 0.3s ease-in-out;
      @include tablet-up {
      }
      @include desktop-up {
      }

      &--open {
        opacity: 1;
        visibility: visible;
        transition:
          opacity 0.3s ease-in-out,
          visibility 0.3s ease-in-out;
        @include tablet-up {
        }
        @include desktop-up {
        }
      }

      &--close {
        opacity: 0;
        visibility: hidden;
        transition:
          opacity 0.3s ease-in-out,
          visibility 0.3s ease-in-out;
        @include tablet-up {
        }
        @include desktop-up {
        }
      }
    }

    &__content {
      display: flex;
      flex-direction: column;
      gap: spx(35);
      margin-top: spx(60);
      @include tablet-up {
        gap: ppx(33 * 1.2);
        width: ppx(1313 * 1.2);
        margin-top: ppx(55 * 1.2);
      }
      @include desktop-up {
        gap: ppx(33);
        width: ppx(1313);
        margin-top: ppx(55);
      }
    }

    &__item {
      display: grid;
      grid-template-columns: max-content auto;
      gap: spx(20);
      @include tablet-up {
        gap: ppx(30 * 1.2);
      }
      @include desktop-up {
        gap: ppx(30);
      }
    }

    &__item-label {
      display: block;
      width: spx(80);
      height: 1px;
      background: white;
      margin-top: spx(20);
      @include tablet-up {
        width: ppx(100 * 1.2);
        margin-top: ppx(22 * 1.2);
      }
      @include desktop-up {
        width: ppx(100);
        margin-top: ppx(22);
      }
    }

    &__item-detail {
      display: flex;
      flex-direction: column;
      gap: spx(15);
      @include tablet-up {
        display: grid;
        grid-template-columns: ppx(240 * 1.2) auto;
        gap: ppx(39 * 1.2);
      }
      @include desktop-up {
        grid-template-columns: ppx(240) auto;
        gap: ppx(39);
      }
    }

    &__item-title {
      color: var(--white, #fff);
      font-family: 'Zen Kaku Gothic New';
      font-size: spx(30);
      font-style: normal;
      font-weight: 700;
      line-height: 130%;
      letter-spacing: spx(-0.3);
      @include tablet-up {
        font-size: ppx(30 * 1.2);
        line-height: 150%;
      }
      @include desktop-up {
        font-size: ppx(30);
      }
    }

    &__item-description {
      color: var(--white, #fff);
      font-family: 'Zen Kaku Gothic New';
      font-size: spx(27);
      font-style: normal;
      font-weight: 400;
      line-height: 140%;
      @include tablet-up {
        font-size: ppx(28 * 1.2);
        line-height: 150%;
      }
      @include desktop-up {
        font-size: ppx(28);
      }
    }
    &__footer {
      margin-top: spx(55);
      width: spx(580);
      margin-inline: auto;
      display: flex;
      flex-direction: column;
      gap: spx(15);
      @include tablet-up {
        margin-top: ppx(48 * 1.2);
        width: ppx(1183 * 1.2);
        margin-left: ppx(130 * 1.2);
        gap: ppx(15 * 1.2);
      }
      @include desktop-up {
        margin-top: ppx(48);
        width: ppx(1183);
        margin-left: ppx(130);
        gap: ppx(15);
      }
    }
    &__note {
      color: var(--white, #fff);
      font-family: 'Zen Kaku Gothic New';
      font-size: spx(24);
      font-style: normal;
      font-weight: 400;
      line-height: 140%;
      display: flex;

      @include tablet-up {
        font-size: ppx(24 * 1.2);
        line-height: 170%;
        letter-spacing: ppx(2.4 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(24);
        letter-spacing: ppx(2.4);
      }
      &:before {
        content: '※';
      }
    }
  }
</style>
